---
import '../styles/global.css';
import Navbar from '../components/Navbar.tsx';
import Footer from '../components/Footer.astro';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Contact Us - Kozy Komfort</title>
		<meta name="description" content="Get in touch with Kozy Komfort to learn more about our adult foster care services." />
	</head>

	<body>
		<!-- Skip to main content link for keyboard navigation -->
		<a href="#main-content" class="sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-[#BE1C2B] focus:text-white focus:rounded-md focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2">
			Skip to main content
		</a>
		<Navbar client:load />
		<main id="main-content">

		<!-- Hero Section with Aerial Background -->
		<section 
			class="h-[40vh] min-h-[350px] flex items-center justify-center bg-cover bg-center bg-no-repeat relative overflow-hidden mt-[72px] md:mt-[88px]"
			style="background-image: url('/images/hero-section/hero-image.png');"
		>
			<!-- Dark overlay for text readability -->
			<div class="absolute inset-0 bg-black/70"></div>
			
			<!-- Content -->
			<div class="container mx-auto px-6 md:px-8 lg:px-4 relative z-10 w-full text-center">
				<p class="text-sm md:text-base text-white mb-2" style="text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);">
					Kozy Komfort | Battle Creek AFC
				</p>
				<h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-white leading-tight" style="text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);">
					Your Questions Matter â€” Contact Us Today
				</h1>
			</div>
		</section>

		<!-- Contact Form Section -->
		<section id="contact" class="py-12 md:py-16 bg-white">
			<div class="container mx-auto px-6 md:px-8 lg:px-4 section-container-margin">
				<div class="max-w-2xl mx-auto">
					<form class="space-y-6" id="contact-form" action="mailto:kozykomfortassistedliving@gmail.com" method="post" enctype="text/plain" aria-label="Contact form">
						<!-- Required Field Indicator -->
						<p class="text-sm text-[#BE1C2B] font-medium mb-2" role="status" aria-live="polite">*INDICATES REQUIRED FIELD</p>
						<div id="form-error" class="text-red-600 text-sm mb-4" role="alert" aria-live="assertive" aria-atomic="true"></div>

						<!-- Name Fields (First and Last side by side) -->
						<div>
							<label for="firstName" class="block text-sm font-bold text-gray-900 uppercase mb-2">
								NAME <span class="text-[#BE1C2B]">*</span>
							</label>
							<div class="grid grid-cols-2 gap-4">
								<input 
									type="text" 
									id="firstName" 
									name="firstName" 
									required
									placeholder="First"
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
								>
								<input 
									type="text" 
									id="lastName" 
									name="lastName" 
									required
									placeholder="Last"
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
								>
							</div>
						</div>

						<!-- Email Field -->
						<div>
							<label for="email" class="block text-sm font-bold text-gray-900 uppercase mb-2">
								EMAIL <span class="text-[#BE1C2B]">*</span>
							</label>
							<input 
								type="email" 
								id="email" 
								name="email" 
								required
								class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
							>
						</div>

						<!-- Message Field -->
						<div>
							<label for="message" class="block text-sm font-bold text-gray-900 uppercase mb-2">
								MESSAGE <span class="text-[#BE1C2B]">*</span>
							</label>
							<textarea 
								id="message" 
								name="message" 
								rows="6" 
								required
								class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors resize-none"
							></textarea>
						</div>

						<!-- Submit Button -->
						<div>
							<button 
								type="submit"
								class="w-full text-white px-6 py-3 rounded-md font-semibold uppercase transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#BE1C2B] focus:ring-offset-2"
								style="background-color: #BE1C2B;"
								onmouseenter="this.style.backgroundColor='#9A1623'"
								onmouseleave="this.style.backgroundColor='#BE1C2B'"
								onfocus="this.style.backgroundColor='#9A1623'; this.style.outline='2px solid white'; this.style.outlineOffset='2px';"
								onblur="this.style.backgroundColor='#BE1C2B'; this.style.outline=''; this.style.outlineOffset='';"
								aria-label="Submit contact form"
							>
								SUBMIT
							</button>
						</div>
					</form>
				</div>
			</div>
		</section>
		</main>
		<Footer />

		<!-- Form submission handler -->
		<script>
			const form = document.getElementById('contact-form');
			const errorDiv = document.getElementById('form-error');
			
			if (form) {
				form.addEventListener('submit', (e) => {
					e.preventDefault();
					
					// Clear previous errors
					if (errorDiv) {
						errorDiv.textContent = '';
						errorDiv.setAttribute('aria-hidden', 'true');
					}
					
					const formData = new FormData(form);
					const firstName = formData.get('firstName');
					const lastName = formData.get('lastName');
					const email = formData.get('email');
					const message = formData.get('message');
					
					// Validation
					if (!firstName || !lastName || !email || !message) {
						if (errorDiv) {
							errorDiv.textContent = 'Please fill in all required fields.';
							errorDiv.setAttribute('aria-hidden', 'false');
							errorDiv.focus();
						}
						return;
					}
					
					// Create email body
					const subject = encodeURIComponent('Contact Form Submission from Kozy Komfort Website');
					const body = encodeURIComponent(
						`New Contact Form Submission\n\n` +
						`Name: ${firstName} ${lastName}\n` +
						`Email: ${email}\n\n` +
						`Message:\n${message}`
					);
					
					// Open mailto link
					window.location.href = `mailto:kozykomfortassistedliving@gmail.com?subject=${subject}&body=${body}`;
					
					// Show success message
					setTimeout(() => {
						alert(`Thank you, ${firstName} ${lastName}! Your message has been prepared. Please send the email that opens in your email client.`);
						form.reset();
						if (errorDiv) {
							errorDiv.textContent = '';
							errorDiv.setAttribute('aria-hidden', 'true');
						}
					}, 100);
				});
			}

			// Smooth scroll for anchor links
			document.addEventListener('DOMContentLoaded', () => {
				const links = document.querySelectorAll('a[href^="#"]');
				const navbar = document.querySelector('nav');
				const navbarHeight = navbar ? navbar.offsetHeight : 100;
				
				links.forEach(link => {
					link.addEventListener('click', (e) => {
						const href = link.getAttribute('href');
						if (href && href !== '#') {
							e.preventDefault();
							const target = document.querySelector(href);
							if (target) {
								const targetPosition = target.getBoundingClientRect().top + window.pageYOffset;
								const offsetPosition = targetPosition - navbarHeight;
								
								window.scrollTo({
									top: offsetPosition,
									behavior: 'smooth'
								});
							}
						}
					});
				});
			});
		</script>
	</body>
</html>
