---
import '../styles/global.css';
import Navbar from '../components/Navbar.tsx';
import Footer from '../components/Footer.astro';
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Join Our Team - Kozy Komfort</title>
		<meta name="description" content="Join our team of dedicated caregivers at Kozy Komfort Assisted Living. We're looking for experienced caregivers who share our commitment to quality care." />
	</head>

	<body>
		<!-- Skip to main content link for keyboard navigation -->
		<a href="#main-content" class="sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-[#BE1C2B] focus:text-white focus:rounded-md focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2">
			Skip to main content
		</a>
		<Navbar client:load />
		<main id="main-content">

		<!-- Hero Section with Same Image as Home Page -->
		<section 
			class="h-[60vh] min-h-[400px] flex items-center justify-center bg-cover bg-center bg-no-repeat relative overflow-hidden mt-[72px] md:mt-[88px]"
			style="background-image: url('/images/hero-section/hero-image.png');"
		>
			<!-- Dark overlay for text readability -->
			<div class="absolute inset-0 bg-black/80"></div>
			
			<!-- Content -->
			<div class="container mx-auto px-6 md:px-8 lg:px-4 relative z-10 w-full text-center">
				<h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-4 leading-tight" style="text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.8);">
					Would You Like to Join<br />
					Our Team of Caregivers?
				</h1>
			</div>
		</section>

		<!-- Main Content Section -->
		<section class="py-16 md:py-20 bg-white">
			<div class="container mx-auto px-6 md:px-8 lg:px-4 section-container-margin">
				<div class="max-w-4xl mx-auto">
					<!-- Introduction -->
					<div class="mb-12">
						<p class="text-lg md:text-xl text-gray-700 leading-relaxed mb-8">
							If you have experience working in senior care—whether in adult foster care, assisted living, nursing homes, hospitals, or similar settings—we'd love to hear from you! Please use the contact form below or email us your resume, availability, and a brief introduction about yourself.
						</p>
					</div>

					<!-- Requirements/Benefits List -->
					<div class="mb-12">
						<h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-6">Requirements & Benefits</h2>
						<ul class="space-y-4 text-base md:text-lg text-gray-700">
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span><strong class="text-gray-900">FBI fingerprint background checks</strong> required (Michigan State Law compliant).</span>
							</li>
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span><strong class="text-gray-900">Negative TB test</strong> required.</span>
							</li>
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span><strong class="text-gray-900">Two professional letters of reference</strong> required.</span>
							</li>
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span>Must be able to <strong class="text-gray-900">physically lift</strong> and pass an <strong class="text-gray-900">employment physical</strong>.</span>
							</li>
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span>Must be <strong class="text-gray-900">respectful, honest, dependable, and self-motivated</strong>.</span>
							</li>
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span><strong class="text-gray-900">All training provided</strong>.</span>
							</li>
							<li class="flex items-start gap-3">
								<span class="text-[#BE1C2B] font-bold text-xl mt-0.5">•</span>
								<span><strong class="text-gray-900">Performance-based pay</strong>.</span>
							</li>
						</ul>
					</div>

					<!-- Application Form -->
					<div class="bg-gray-50 rounded-lg shadow-lg p-8 md:p-12">
						<h2 class="text-2xl md:text-3xl font-bold text-gray-900 mb-6">Application Form</h2>
						<p class="text-gray-700 mb-8">
							Please submit your information, a brief description about yourself, and if you have a resume, you can upload it below.
						</p>
						
						<form class="space-y-6" id="career-form" action="mailto:kozykomfortassistedliving@gmail.com" method="post" enctype="text/plain" aria-label="Career application form">
							<div id="form-error" class="text-red-600 text-sm mb-4" role="alert" aria-live="assertive" aria-atomic="true"></div>
							<!-- Name -->
							<div>
								<label for="name" class="block text-sm font-medium text-gray-700 mb-2">
									Full Name <span class="text-red-600">*</span>
								</label>
								<input 
									type="text" 
									id="name" 
									name="name" 
									required
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
									placeholder="Enter your full name"
								>
							</div>

							<!-- Email -->
							<div>
								<label for="email" class="block text-sm font-medium text-gray-700 mb-2">
									Email Address <span class="text-red-600">*</span>
								</label>
								<input 
									type="email" 
									id="email" 
									name="email" 
									required
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
									placeholder="your.email@example.com"
								>
							</div>

							<!-- Phone -->
							<div>
								<label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
									Phone Number <span class="text-red-600">*</span>
								</label>
								<input 
									type="tel" 
									id="phone" 
									name="phone" 
									required
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
									placeholder="(269) 123-4567"
								>
							</div>

							<!-- Availability -->
							<div>
								<label for="availability" class="block text-sm font-medium text-gray-700 mb-2">
									Availability <span class="text-red-600">*</span>
								</label>
								<input 
									type="text" 
									id="availability" 
									name="availability" 
									required
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
									placeholder="e.g., Full-time, Part-time, Weekends, etc."
								>
							</div>

							<!-- Experience -->
							<div>
								<label for="experience" class="block text-sm font-medium text-gray-700 mb-2">
									Years of Experience in Senior Care
								</label>
								<input 
									type="text" 
									id="experience" 
									name="experience" 
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors"
									placeholder="e.g., 5 years in assisted living"
								>
							</div>

							<!-- About Yourself -->
							<div>
								<label for="about" class="block text-sm font-medium text-gray-700 mb-2">
									Tell Us About Yourself <span class="text-red-600">*</span>
								</label>
								<textarea 
									id="about" 
									name="about" 
									rows="5" 
									required
									class="w-full px-4 py-3 border-2 border-gray-600 rounded-md focus:ring-2 focus:ring-[#BE1C2B] focus:border-[#BE1C2B] transition-colors resize-none"
									placeholder="Please provide a brief description about yourself, your experience, and why you're interested in joining our team..."
								></textarea>
							</div>

							<!-- Resume Upload -->
							<div>
								<label for="resume" class="block text-sm font-medium text-gray-700 mb-2">
									Upload Resume (Optional)
								</label>
								<div class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-[#BE1C2B] transition-colors">
									<div class="space-y-1 text-center">
										<svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
											<path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
										</svg>
										<div class="flex text-sm text-gray-600">
											<label for="resume" class="relative cursor-pointer bg-white rounded-md font-medium text-[#BE1C2B] hover:text-[#9A1623] focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-[#BE1C2B]">
												<span>Upload a file</span>
												<input 
													id="resume" 
													name="resume" 
													type="file" 
													accept=".pdf,.doc,.docx"
													class="sr-only"
												>
											</label>
											<p class="pl-1">or drag and drop</p>
										</div>
										<p class="text-xs text-gray-500">PDF, DOC, DOCX up to 10MB</p>
										<p class="text-xs text-gray-500" id="file-name"></p>
									</div>
								</div>
							</div>

							<!-- Submit Button -->
							<div>
								<button 
									type="submit"
									class="w-full text-white px-8 py-4 rounded-md font-semibold text-lg transition-colors cursor-pointer hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-[#BE1C2B] focus:ring-offset-2"
									style="background-color: #BE1C2B;"
									onmouseenter="this.style.backgroundColor='#9A1623'"
									onmouseleave="this.style.backgroundColor='#BE1C2B'"
									onfocus="this.style.backgroundColor='#9A1623'; this.style.outline='2px solid white'; this.style.outlineOffset='2px';"
									onblur="this.style.backgroundColor='#BE1C2B'; this.style.outline=''; this.style.outlineOffset='';"
									aria-label="Submit career application"
								>
									Submit Application
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</section>
		</main>
		<Footer />

		<!-- Form submission handler -->
		<script>
			// File upload display
			const fileInput = document.getElementById('resume');
			const fileName = document.getElementById('file-name');
			
			if (fileInput) {
				fileInput.addEventListener('change', (e) => {
					if (e.target.files.length > 0) {
						fileName.textContent = `Selected: ${e.target.files[0].name}`;
						fileName.classList.remove('text-gray-500');
						fileName.classList.add('text-green-600', 'font-medium');
					}
				});
			}

			// Form submission
			const form = document.getElementById('career-form');
			const errorDiv = document.getElementById('form-error');
			
			if (form) {
				form.addEventListener('submit', (e) => {
					e.preventDefault();
					
					// Clear previous errors
					if (errorDiv) {
						errorDiv.textContent = '';
						errorDiv.setAttribute('aria-hidden', 'true');
					}
					
					const formData = new FormData(form);
					const name = formData.get('name');
					const email = formData.get('email');
					const phone = formData.get('phone');
					const availability = formData.get('availability');
					const experience = formData.get('experience') || 'Not provided';
					const about = formData.get('about');
					const resumeFile = fileInput?.files[0];
					
					// Validation
					if (!name || !email || !phone || !availability || !about) {
						if (errorDiv) {
							errorDiv.textContent = 'Please fill in all required fields.';
							errorDiv.setAttribute('aria-hidden', 'false');
							errorDiv.focus();
						}
						return;
					}
					
					// Create email body
					const subject = encodeURIComponent('Career Application - Kozy Komfort Assisted Living');
					let body = encodeURIComponent(
						`New Career Application Submission\n\n` +
						`Name: ${name}\n` +
						`Email: ${email}\n` +
						`Phone: ${phone}\n` +
						`Availability: ${availability}\n` +
						`Experience: ${experience}\n\n` +
						`About Themselves:\n${about}\n`
					);
					
					if (resumeFile) {
						body += encodeURIComponent(`\nNote: Resume file attached: ${resumeFile.name} (${(resumeFile.size / 1024).toFixed(2)} KB)\n`);
						body += encodeURIComponent(`Please note: The resume file cannot be attached via mailto. The applicant should send it separately or you can request it during follow-up.`);
					}
					
					// Open mailto link
					window.location.href = `mailto:kozykomfortassistedliving@gmail.com?subject=${subject}&body=${body}`;
					
					// Show success message
					setTimeout(() => {
						alert(`Thank you, ${name}! Your application has been prepared. Please send the email that opens in your email client. ${resumeFile ? 'Note: The resume file cannot be attached via email link. You may need to send it separately or we will request it during follow-up.' : ''}`);
						form.reset();
						if (fileName) {
							fileName.textContent = '';
							fileName.classList.remove('text-green-600', 'font-medium');
							fileName.classList.add('text-gray-500');
						}
						if (errorDiv) {
							errorDiv.textContent = '';
							errorDiv.setAttribute('aria-hidden', 'true');
						}
					}, 100);
				});
			}

			// Smooth scroll for anchor links (same as index page)
			document.addEventListener('DOMContentLoaded', () => {
				const links = document.querySelectorAll('a[href^="#"]');
				const navbar = document.querySelector('nav');
				const navbarHeight = navbar ? navbar.offsetHeight : 100;
				
				links.forEach(link => {
					link.addEventListener('click', (e) => {
						const href = link.getAttribute('href');
						if (href && href !== '#') {
							e.preventDefault();
							const target = document.querySelector(href);
							if (target) {
								const targetPosition = target.getBoundingClientRect().top + window.pageYOffset;
								const offsetPosition = targetPosition - navbarHeight;
								
								window.scrollTo({
									top: offsetPosition,
									behavior: 'smooth'
								});
							}
						}
					});
				});
			});
		</script>
	</body>
</html>

